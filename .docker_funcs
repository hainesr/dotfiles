#!/bin/bash
#
# Bash docker functions.
#
# Robert Haines.
# Inspired by https://github.com/jfrazelle/dotfiles/blob/master/.dockerfunc
#
# BSD Licenced. See LICENCE for details.
#

# Cleanup helper.
docker_cleanup() {
  docker rm -v $(docker ps --filter status=exited -q 2>/dev/null) 2>/dev/null
  docker rmi $(docker images --filter dangling=true -q 2>/dev/null) 2>/dev/null
}

# Jekyll
jekyll() {
  docker run -it --rm \
    --name jekyll \
    --volume=$(pwd):/srv/jekyll \
    -p 4000:4000 \
    jekyll/jekyll:pages
}

# p4merge
p4merge() {
  docker run -it --rm \
    --name p4merge \
    --volume=$HOME/.config/p4merge:/home/p4v/.p4merge \
    --volume=$HOME/.cache:/home/p4v/.cache \
    --volume=$(pwd):/opt/work \
    --volume=/tmp/.X11-unix:/tmp/.X11-unix \
    -e DISPLAY=unix$DISPLAY \
    -u $UID \
    hainesr/p4v p4merge "$@"
}
